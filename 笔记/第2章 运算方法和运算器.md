[toc]

# 第2章 运算方法和运算器

## 2.1 数据与文字的表示方法

### 2.1.1 数据格式

- 计算机常用数据格式：**定点格式**和**浮点格式**。
- **定点格式**容许数据**范围有限**，硬件处理较为**简单**；**浮点格式**容许数据**范围很大**，硬件处理较为**复杂**。

#### 1.定点数的表示方法

- 定点格式就是约定机器中所有数据的小数点位置是固定不变的。由于约定好了，小数点就不记在数据里了。

- 通常将小数点放在最高位和最低位，表示成**纯小数**和**纯整数**。

- 定点数的结构（注意尾数是n位，后面有用）：

  ![image-20221210120511576](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221210120511576.png)

- 符号为由1或0表示正负，具体哪个表示哪个得具体看。

- **纯小数**：尾数全0则$|x|$最小，尾数全1则$|x|$最大。数的表示范围为：$0\le|x|\le1-2^n$。

- **纯整数**：尾数全0则尾数全0则$|x|$最小，尾数全1则$|x|$最大。数的表示范围为：$0\le|x|\le2^n-1$

- 目前计算机中常用定点纯整数表示整型，因此定点数表示的运算简称为**整数运算**。

#### 2. 浮点数的表示方法

- **浮点表示法**：将一个数的范围和精度在计算机的一个存储单元中分别表示。
- $N=2^e.M$：M是浮点数的**尾数**，是纯小数；e是**指数**，是整数，在浮点数中又称**阶码**；2是**基数**，在计算机中由于采用二进制，基数定为2最合适。
- 计算机中，一个机器浮点数由阶码和尾数及其符号位组成：
  - ![image-20221211204725812](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221211204725812.png)

#### 3. 十进制数串的表示方法

- 大多数通用性强的计算机能够直接处理十进制数据。十进制数据在计算机中主要有2种表示形式：
  1. **字符串形式**：1字节存放1个十进制的数位或符号位。主要用在非数值计算的应用领域。
  2. **压缩的十进制数串形式**：1字节存放2个十进制数位。其比字符串形式节省空间，且便于运算，被广泛采用。常用BCD码或ASCII码低4位来表示1位十进制数（占4位二进制），2位十进制数即占1字节。然后使用十进制编码的冗余状态表示符号。下面给出一个例子：
     - ![image-20221211205358994](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221211205358994.png)
     - 算上符号位有奇数个时，前补“0”即可。这里12(C)表示正数，13(D)表示负数。
- 常用**数组方式**来存放这一种数串。

### 2.1.2 数的机器码表示

- 为了区分一般书写表示的数和机器中对这些数的编码表示，常称前者为**真值**，后者为**机器码/机器数**。

#### 1. 原码表示法

- **原码的定义式**：
  - 对于**定点整数**：
  - $[x]_{\text {原 }}=\left\{\begin{array}{ll}
    x, & 2^{n}>x \geqslant 0 \\
    2^{n}-x=2^{n}+|x|, & 0 \geqslant x>-2^{n}
    \end{array}\right.$
  - 对于**定点小数**：
  - $[x]_{\text {原 }}=\left\{\begin{array}{ll}
    x, & 1>x \geqslant 0 \\
    1-x, & 0 \geqslant x>-1
    \end{array}\right.$
- **惯常公式**：
  - 对于正数：真值前加上符号位0
  - 对于负数：真值前加上符号位1
  - 对于0：真值前加上符号位0/1（即原码的0有2种表示方式）
- 原码表示法简单易懂，但是加法运算复杂：同号数值部分相加，符号位不变；异号数值先比较绝对值，后大数减小数，然后以大数的符号位作为结果的符号位。
- 为了解决加法运算复杂的问题，发明了**补码**。

#### 2. 补码表示法

- **补码的概念**：
  - **举例**：以一个12进制时钟为例：时针`-3`小时和`+9`小时得到的结果是完全一样的。由此，我们说`9`是`-3`对`12`的补码，记作$-3=+9\space\space(mod 12)$，其实就是数学中的**同余式**。
  - 由此，我们找到了一种**将负数替换成一个等价的正数**的方式，从而将原码运算中的异号加法转换为同号加法。
  - 以**纯整数**的情况来说：在异号加法中，对于一个n位2进制的负数，可以求其对于$2^{n+1}$的补数，该补数就将负数转化为了正数，异号加法也就变成了同号加法，在这种情况中，若运算结果超过了模数$2^{n+1}$，则将结果中的模数丢弃即可
- **补码的定义式**：
  - 对于**定点整数**：
  - 