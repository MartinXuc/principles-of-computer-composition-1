[TOC]

# 第1章 计算机系统概论

## 1.1 计算机的分类

- 电子计算机分为**电子模拟计算机**和**电子数字计算机**。
- ![image-20221207201741339](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221207201741339.png)
- 电子计算机一般指**电子数字计算机**。
- **电子数字计算机**进一步可分为**专用计算机**和**通用计算机**。
- **专用计算机**  **效率**高，**速度**快，**价格**低，但**适应性**很差。**通用计算机** **适应性**很强，但是**效率**和**经济性**不如专用计算机。
- 通用计算机分为**超级计算机**、**大型机**、**服务器**、**PC机**、**单片机**、**多核机**六类。其区别在于体积、简易性、功率损耗、性能指标、数据存储容量、指令系统规模和机器价格。
- ![image-20221207202417863](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221207202417863.png)
- 但是这些不同种类的通用计算机的概念也随着技术发展逐渐发生变化。

## 1.2 计算机的发展简史

### 1.2.1 计算机的五代变化

- | 代数  | 名称                           | 时间      | 运算速度         | 特点                                                         |
  | ----- | ------------------------------ | --------- | ---------------- | ------------------------------------------------------------ |
  | 第1代 | 电子管计算机                   | 1946-1957 | 每秒千、万次     | 形成了计算机的基本体系；确定了程序设计的基本方法；**数据处理机**开始得到应用 |
  | 第2代 | 晶体管计算机                   | 1958-1964 | 每秒万、十万次   | **工业控制机**开始得到应用                                   |
  | 第3代 | 中小规模集成电路计算机         | 1965-1971 | 每秒十万、百万次 | 计算机种类开始多样化；计算机生产系列化；计算机使用系统化；**小型计算机**出现 |
  | 第4代 | 大规模和超大规模集成电路计算机 | 1972-1990 | 每秒千万、亿次   | 由几片大规模集成电路组成的**微型计算机**出现                 |
  | 第5代 | 巨大规模集成电路计算机         | 1991-今   | 每秒十亿次以上   | 由一片巨大规模集成电路实现的**单片计算机**出现               |

- 计算机自1946年诞生以来，大约每隔5年**运算速度**提高10倍，**可靠性**提高10倍，**成本**降低为1/10，**体积**缩小为1/10。
- 20世纪70年代以来，计算机**生产数量**每年以25%递增。
- 计算机自第3代以来，与集成电路技术的发展密切相关。**摩尔定律**指出，集成电路芯片上的晶体管数量每年翻一番。

### 1.2.2 半导体存储器的发展

- 20世纪5~60年代，使用**磁芯存储器**：1微秒可读取1位；1位磁芯直径1mm，体积大；价格昂贵，读写操作繁琐，制作工艺复杂，难以量产；读出具有破坏性。
- 1970年，仙童半导体公司，生产**半导体存储器**：大小和1个磁芯相仿；256位存储；非破坏性，读1位70纳秒；价格昂贵。
- 1974年以后，半导体存储器价格低于磁芯，此后持续快速下跌，存储密度持续增加，读写速度持续增加。
- 存储器技术的发展和处理器技术的发展一起推动了计算机的全球爆发式应用。计算机走向了个人电脑时代。

### 1.2.3 微处理器的发展

- 随着时间推移，处理器芯片的**单元密度**不断增加，单个芯片上**单元个数**越来越多，构建1个计算机所需**芯片个数**越来越少。
- 1971年Intel公司开发**Intel 4004**。这是第一个将CPU所有元件都放入同一块芯片内的产品，是**第1个微处理器**。该芯片能完成两个4位数相加，进而完成乘法。它是微处理器能力和功能不断发展的奠基者。
- 1972年Intel公司开发Intel 8008，这是**第一个8位微处理器**，是一个主要进步。
- 1974年Intel公司开发Intel 8080，这是**第一个通用微处理器**。8080是8位微处理器，但是速度更快，有更丰富的指令系统和更强的寻址能力。
- 20世纪70年代末，出现以Intel 8086为代表的一系列**强大的通用16位微处理器**。
- 1981年，贝尔实验室和HP公司开发出了32位单片微处理机。
- 1985年，Intel推出32位微处理器 Intel 80386。

### 1.2.4 计算机的性能指标

- **吞吐量**：表征一台计算机在某一时间间隔内能够处理的信息量。
- **响应时间**：表征从输入有效到系统产生响应之间的时间度量，用时间单位来度量。
- **利用率**：在给定的时间间隔内系统被实际使用的时间所占的比率，用百分比表示。
- **处理机字长**：处理机运算器中一次能够完成二进制运算的位数，如32位、64位。
- **总线宽度**：CPU中运算器与存储器之间进行互连的内部总线二进制位数。
- **存储器容量**：存储器中所有存储单元的总数目，常用KB、MB、GB、TB来表示。
- **存储器带宽**：单位时间内从存储器读出的二进制数信息量，一般用`字节数/秒`表示。
- **主频**或**时钟周期**：主时钟的频率f叫**CPU的主频**，度量单位是MHz、GHz；主频的倒数为CPU的时钟周期，度量单位是μs、ns。
- **CPU执行时间**：表示CPU执行一段程序所占用CPU的时间。$CPU的执行时间=CPU的时钟周期数\times CPU的时钟周期$
- **CPI**：每条指令周期数。$CPI=执行某段程序所需CPU时钟周期数\div程序包含的指令数$
- **MIPS** (Million Instructions Per Second)：平均每秒执行多少百万条定点指令数。$MIPS=指令数\div(程序执行时间\times10^6)$
- **FLOPS** (Floating-point Operations Per Second)：每秒执行浮点操作的次数，用来衡量机器浮点操作的性能。$FLOPS=程序中的浮点操作次数\div程序执行时间(s)$

## 1.3 计算机的硬件

### 1.3.1 硬件组成要素

- 在电子计算机里：**运算器**进行数据的运算；**存储器**进行数据的记忆；**适配器**用来管理**输入设备**和**输出设备**，它们将原始信息送入计算机，将计算结果呈现出来；**控制器**用来控制整个运算过程。
- ![image-20221207212122479](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221207212122479.png)

### 1.3.2 运算器

- 运算器的主要功能是进行加减乘除等算术运算。除此以外，还可以进行逻辑运算。
- 通常称其为**ALU**，即算数逻辑运算部件。
- 运算器长度一般是8位、16位、32位、64位；位数越多，计算时精度越高，所需的电子器件越多。
- ![image-20221207212430073](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221207212430073.png)

### 1.3.3 存储器

- 存储器的功能是保存或”记忆“解题的原始数据和解题步骤。
- 运算前需要把参与运算的数据和解题步骤通过输入设备送到存储器中保存起来。
- CPU内通常采用半导体器件来进行存储工作，半导体触发器是常用的一种。
- 保存一个固定字长的一系列触发器称为一个**存储单元**。
- 每个存储单元都有编号，称为**地址**。
- 所有对存储器的操作，都需要按照给定的地址进行。
- 存储器**所有存储单元的总数**称为存储器的**存储容量**，常用KB、MB等表示。
- 计算机中一般还配备存储容量更大的磁盘存储器和光盘存储器，称为**外存储器**。
- 相较于外存储器，半导体存储器称为**内存储器**，简称**内存**。
- ![image-20221207213040115](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221207213040115.png)

### 1.3.4 控制器

- 控制器是计算机中发号施令的部件，它控制计算机的各部件有条不紊地进行工作。

- 控制器的任务是从内存中取出解题步骤加以分析，然后执行某种操作。


#### 计算程序

- 运算器只能完成加减乘除和其他简单的辅助操作。

- 计算机在运算较为复杂的题目前，必须将之化为一步一步简单的加减乘除等基本操作来做。

- 每一个基本操作就叫**指令**。
- 解决某一问题的一串指令序列，叫做该问题的**计算程序**。
- 程序中的指令通常**按顺序执行**，这些指令**顺次**放在存储器里。

#### 指令的形式

- 每条指令应当明确告诉控制器，从存储器的哪个单元取数，并进行何种操作。

- 指令由两部分组成：操作的性质和操作数的地址。前者称为**操作码**，后者称为**地址码**。指令的逻辑形式如下：

  ![image-20221208210957485](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221208210957485.png)

- 操作码和地址码均可约定成二进制表示，这样就可以将指令如同数据那样存入存储器中：![image-20221208205402510](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221208205402510.png)
- 理论上存储器的任何位置既可以存放数据也可以存放指令，不过一般是将指令和数据分开存放。
- **存储程序**：将解题的程序存放到存储器中的过程。
- **程序控制**：控制器依据存储的程序来控制全机协调地完成计算任务的过程。
- **冯·诺依曼结构**：存储程序并按地址顺序执行，将指令和数据存放在同一个存储器。
- **哈佛结构**：将指令和数据分别放在两个存储器。哈佛结构的计算机速度更快，成本也更高（随着技术发展这并不是问题）。
- 一个计算机通常有几十种基本指令，构成了计算机的**指令系统**。
- 指令系统不仅是硬件设计的依据，而且是软件设计的基础。因此，指令系统是衡量计算机性能的一个重要标志。

#### 控制器的基本任务

- 控制器的**基本任务**就是按照计算机程序所排的指令序列，先从存储器取出一条指令放到控制器中，对该指令的操作码由译码器进行分析判别，然后根据指令性质，执行这条指令，进行相应的操作。接着从存储器取出第二条指令，再执行这第二条指令，以此类推。

- **取值周期**：取指令的一段时间。

- **执行周期**：执行指令的一段时间。

- 控制器反复交替地在取值周期与执行周期之中。

- 每取1条指令，控制器中的指令计数器就加1，从而为取下一条指令做好准备，这也就是指令在存储器中顺序存放的原因。

- **中央处理器CPU**：计算机系统中，运算器和控制器通常被组合在一个集成电路芯片中，合称中央处理器，简称处理器。

  ![image-20221208210920875](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221208210920875.png)

### 1.3.5 适配器与输入输出设备

- **理想的输入设备**：“会看”“会听”，即能够把人们用文字或语言所表达的问题直接送入计算机内部进行处理。
- **常用的输入设备**：键盘、鼠标、数字扫描仪、模数转换器等。
- **输入设备的作用**：把人们所熟悉的某种信息形式变换为机器内部所能接收和识别的二进制信息形式。
- **理想的输出设备**：“会写”“会讲”。
- **输出设备的作用**：将计算机处理的结果变换为人或其他机器设备所能接收和识别的信息形式。
- **外围设备**：计算机的输入输出设备常统称为外围设备。
- **适配器**：计算机外围设备种类繁多且速度各异，因而其不直接与高速工作的主机设备直接相连，而是通过**适配器**与主机相联系。适配器的作用相当于一个转换器，它可以保证外围设备用计算机系统特性所要求的形式发送或接收信息。
- **系统总线**：是构成计算机系统的骨架，是多个系统部件之间进行数据传送的共同通路。借助系统总线，计算机在各系统部件之间实现传送地址、数据和控制信息的操作。

## 1.4 计算机的软件

### 1.4.1 软件的组成与分类

- **软件系统**：凡是用于一台计算机的各种程序，统称为这台计算机的程序或软件系统。
- 计算机软件分为两类：系统程序和应用程序：
  - **系统程序**：用来简化程序设计，简化使用方法，提高计算机的使用效率，发挥和扩大计算机的功能及用途。包括以下四类：
    1. 各种**服务性程序**：如诊断程序、排错程序、练习程序等；
    2. **语言程序**：如汇编程序、编译程序、解释程序等。
    3. **操作系统**；
    4. **数据库管理系统**。
  - **应用程序**：用户利用计算机来解决某些问题而编制的程序，如工程设计程序、数据处理程序、自动控制程序、企业管理程序、情报检索程序、科学计算程序等。

### 1.4.2 软件的发展演变

- **手编程序**：早期计算机中，人们直接用机器语言来编写程序。这种程序称为手编程序。机器可以直接识别这种程序，所以也称**目的程序**。这种编程方式容易出错，耗费精力很大，效率很低。

- **汇编语言**：用一些约定的文字、符号和数字按规定的格式来表示不同的二进制指令，然后再用这些指令来编写程序。相较于机器语言，对人类更加直观、方便、友好、便于记忆。

- **汇编器**：计算机无法直接处理汇编语言，为此人们创造了一种程序，叫做汇编器。汇编器将 汇编语言 和 机器语言 进行翻译，从而实现程序设计工作的部分自动化。

- **算法语言**：按实际需要规定好的一套基本符号及由这套基本符号构成程序的规则。算法语言接近数学语言，直观通用，与具体机器无关，容易学习。有名的算法语言有：BASIC、C++、JAVA等。

- **源程序**：用算法语言编写的程序。源程序无法交给机器直接处理，同理，也需要一个“翻译器”。

- **编译程序**：用机器语言书写，用来将源程序翻译为汇编语言。

- **运行系统**：由编译程序所翻译的机器语言程序不能独立运行，需要名为“运行系统”的辅助程序来帮助。

- **编译器**：编译程序和运行系统封装在一起，组成了编译器。

- 一个C语言转换成机器语言的四个步骤：

  1. 通过**编译器**将C语言编译称为汇编语言程序。
  2. 通过**汇编器**汇编为机器语言的目标模块。
  3. **链接器**将多个模块与库程序组合在一起以解析左右的应用。
  4. **加载器**将机器代码放入内存，处理器开始执行。

  ![image-20221210112922611](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221210112922611.png)

- **操作系统**：用来管理计算机资源和自动调度用户的作业程序，使多个用户能够有效地共用一套计算机系统。操作系统大致分为批处理操作系统、分时操作系统、网络操作系统、实时操作系统等。

- **数据库**：实现有组织地、动态地存储大量相关数据，方便多用户访问计算机软、硬件资源组成的系统。

- **数据库管理系统**：**数据库**和**数据库管理软件**的组合。数据库管理系统有多种类型，目前几乎所有计算机都配有数据库管理系统。

- 随着软件的进一步发展，将开发更高级的计算机语言。这是因为目前所有的高级语言编写程序时，程序比较复杂，开发成本高。计算机语言发展的方向是标准化、积木化、产品化，最终是向自然语言发展，它们能够自动生成程序。

## 1.5 计算机系统的层次结构

### 1.5.1 多级组成的计算机系统

- 计算机是一个**十分复杂的硬、软件结合而成的整体**。通常由五个以上不同的级组成，**每一级都能进行程序设计**。
  1. 第1级是**微程序设计级**或**逻辑电路级**。是一个**硬件级**，**由硬件直接执行**。这一级可以执行由微指令来编写的应用程序。
  2. 第2级是**一般机器级**或**机器语言级**。由微程序解释机器指令系统。这一级也是硬件级。
  3. 第3级是**操作系统级**。由操作系统程序实现。操作系统由机器指令和广义指令组成，广义指令是操作系统定义和解释的软件指令。我们称这一级为混合级。
  4. 第4级是**汇编语言级**。这一级由汇编程序支持和执行。如果应用程序采用汇编语言编写，则这一级对计算机是必不可少的；反之，这一级是可以不要的。
  5. 第5级是**高级语言级**。这一级是面向用户，为方便用户编写程序而设置的。这一级由各种高级语言编译程序支持和执行。
- 每一级从下级获取支持，给上级提供服务（最低级和最高级显然不这样）。
- 第1、2、3级基本使用二进制的数字化语言编写程序，机器执行容易；4、5级基本是符号语言，便于用户使用。
- ![image-20221210115219169](https://martin-red-1315612947.cos.ap-shanghai.myqcloud.com/PicGo%E5%9B%BE%E5%BA%8A/image-20221210115219169.png)

### 1.5.2 软件与硬件的逻辑等价性

- 计算机系统的软硬件界限正在变得模糊。任何操作都可以由软件实现，也可以由硬件实现。
- 对于某一功能采用硬件方案还是软件方案取决于机器的价格、速度、可靠性、存储容量和变更周期等因素。
- 容量大、价格低、体积小、可以改写的只读存储器提供了软件固化的良好物质手段。可以将复杂但常用的程序制作成**固件**。其功能上是软件，但实际形态却是硬件。